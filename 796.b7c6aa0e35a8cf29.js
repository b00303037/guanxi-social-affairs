"use strict";(self.webpackChunkguanxi_social_affairs=self.webpackChunkguanxi_social_affairs||[]).push([[796],{9796:(Ye,P,p)=>{p.r(P),p.d(P,{GovtModule:()=>Qe});var d=p(9808),l=p(3075),D=p(7423),U=p(9224),Q=p(6688),g=p(7322),w=p(5245),J=p(7531),O=p(4449),S=p(2181),y=p(6087),B=p(773),q=p(9814),$=p(4107),Y=p(2638),z=p(2368),f=p(4847),E=p(2081),r=p(4999),K=p(4594),j=p(7238),et=p(3058),_=p(6157),N=p(5113),t=p(5e3);const it=function(){return{exact:!0}};function nt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-item",17,18),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(21).close()}),t.TgZ(2,"button",19)(3,"mat-icon"),t._uU(4),t.qZA()(),t.TgZ(5,"span"),t._uU(6),t.qZA()()}if(2&i){const e=o.$implicit,n=t.MAs(1);t.ekj("text-teal-600",n.isActive),t.Q6J("routerLink",e.routerLink)("routerLinkActiveOptions",t.DdM(6,it)),t.xp6(4),t.Oqu(e.icon),t.xp6(2),t.Oqu(e.label)}}let ot=(()=>{class i{constructor(e,n,a){this.media=e,this.changeDetectorRef=n,this.router=a,this._mobileQueryListener=()=>this.changeDetectorRef.detectChanges(),this.mobileQuery=this.media.matchMedia(N.u3.XSmall),this.navListItems=[{icon:"home",label:"\u9996\u9801",routerLink:"/home"},{icon:"view_list",label:"\u7533\u8acb\u55ae\u5217\u8868",routerLink:"/govt/govt-appl-list"},{icon:"analytics",label:"\u7533\u8acb\u4ef6\u6578\u7d71\u8a08",routerLink:"/govt/appl-statistics"},{icon:"feed",label:"\u6700\u65b0\u6d88\u606f\u7dad\u8b77",routerLink:"/govt/news-mgmt"},{icon:"notifications_active",label:"\u767c\u9001\u901a\u77e5",routerLink:"/govt/notification"}],this.mobileQuery.addEventListener("change",this._mobileQueryListener)}ngOnInit(){}logout(){this.router.navigate(["/home"])}ngOnDestroy(){this.mobileQuery.removeEventListener("change",this._mobileQueryListener)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(N.vx),t.Y36(t.sBO),t.Y36(_.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-govt-layouts"]],decls:28,vars:8,consts:[[1,"flex","flex-col","absolute","top-0","right-0","bottom-0","left-0"],[1,"shadow"],[1,"bg-teal-600","text-white"],[1,"w-page","flex"],["type","menu","mat-icon-button","",3,"click"],[1,"grow"],["routerLink","/home",1,"hidden","sm:flex","sm:items-center"],["src","assets/logo.png","width","40","height","40","alt","logo",1,"mr-2"],[1,"text-sm"],[1,"text-base"],[1,"actions-box"],["type","button","mat-button","",3,"click"],[3,"ngClass"],["fixedTopGap","56",1,"w-60","bg-teal-100",3,"mode","fixedInViewport"],["sidenav",""],["routerLinkActive","",3,"routerLink","routerLinkActiveOptions","text-teal-600","click",4,"ngFor","ngForOf"],[1,"w-page","py-4"],["routerLinkActive","",3,"routerLink","routerLinkActiveOptions","click"],["rla","routerLinkActive"],["type","button","mat-icon-button",""]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"header",1)(2,"mat-toolbar",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return t.CHM(a),t.MAs(21).toggle()}),t.TgZ(5,"mat-icon"),t._uU(6,"menu"),t.qZA()(),t._UZ(7,"span",5),t.TgZ(8,"a",6),t._UZ(9,"img",7),t.TgZ(10,"div")(11,"div",8),t._uU(12,"\u65b0\u7af9\u7e23\u95dc\u897f\u93ae\u516c\u6240"),t.qZA(),t.TgZ(13,"div",9),t._uU(14,"Guanxi Township Office"),t.qZA()()(),t._UZ(15,"span",5),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){return n.logout()}),t._uU(18," \u793e\u6703\u8ab2\u767b\u51fa "),t.qZA()()()()(),t.TgZ(19,"mat-sidenav-container",12)(20,"mat-sidenav",13,14)(22,"mat-nav-list"),t.YNc(23,nt,7,7,"mat-list-item",15),t.qZA()(),t.TgZ(24,"mat-sidenav-content")(25,"main")(26,"div",16),t._UZ(27,"router-outlet"),t.qZA()()()()()}2&e&&(t.xp6(2),t.ekj("fixed",n.mobileQuery.matches),t.xp6(17),t.Udp("margin-top",n.mobileQuery.matches?56:0,"px"),t.Q6J("ngClass",n.mobileQuery.matches?"grow shrink-0 basis-auto":"grow shrink basis-0"),t.xp6(1),t.Q6J("mode",n.mobileQuery.matches?"over":"side")("fixedInViewport",n.mobileQuery.matches),t.xp6(3),t.Q6J("ngForOf",n.navListItems))},directives:[K.Ye,D.lW,w.Hw,_.yS,Y.TM,d.mk,Y.JX,O.Hk,d.sg,O.Tg,_.Od,_.rH,Y.Rh,_.lC],styles:[""]}),i})();var at=p(3166);let st=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-appl-statistics"]],decls:2,vars:0,consts:[[1,"page-title"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\u7533\u8acb\u4ef6\u6578\u7d71\u8a08"),t.qZA())},styles:[""]}),i})();var C=p(1777),F=p(7579),m=p(2722),W=p(8372),v=p(8505),A=p(8746),x=p(4004),Z=p(262),L=p(9300),G=p(515),I=p(7660),pt=p(6681),b=p(9577),T=p(3358),lt=p(2824),rt=p(1231),H=p(8966),k=p(2803),R=p(2359),ct=p(2945),tt=p(508),ut=p(6600);function mt(i,o){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function dt(i,o){1&i&&t._UZ(0,"tr",27)}function gt(i,o){1&i&&t._UZ(0,"tr",28)}function ft(i,o){1&i&&t._UZ(0,"tr",29)}function ht(i,o){1&i&&(t.TgZ(0,"th",30),t._uU(1,"\u7533\u8acb\u55ae\u7de8\u865f"),t.qZA())}function _t(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",31)(1,"span",32),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().onGetAppl(s.applicationID)}),t._uU(2),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();t.xp6(1),t.ekj("text-amber-400",n.expandingApplID===e.applicationID||(null==n.expandedAppl?null:n.expandedAppl.applicationID)===e.applicationID),t.xp6(1),t.Oqu(e.applicationID)}}function vt(i,o){1&i&&(t.TgZ(0,"th",30),t._uU(1,"\u7533\u8acb\u65e5\u671f"),t.qZA())}function yt(i,o){if(1&i&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.createDatetime,"yyyy/MM/dd")," ")}}function Ct(i,o){1&i&&(t.TgZ(0,"th",30),t._uU(1,"\u59d3\u540d"),t.qZA())}function At(i,o){if(1&i&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function xt(i,o){1&i&&(t.TgZ(0,"th",30),t._uU(1,"\u7533\u8acb\u72c0\u614b"),t.qZA())}function Zt(i,o){if(1&i&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2),t.ALo(3,"i18nSelect"),t.qZA()()),2&i){const e=o.$implicit,n=t.oxw();t.xp6(2),t.Oqu(t.xi3(3,1,e.status,n.applStatusMap))}}function bt(i,o){1&i&&(t.TgZ(0,"th",33),t._uU(1,"\u64cd\u4f5c"),t.qZA())}const Tt=function(i){return{appl:i}};function Dt(i,o){if(1&i&&(t.TgZ(0,"button",35)(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA()()),2&i){const e=t.oxw().$implicit;t.oxw();const n=t.MAs(39);t.Q6J("matMenuTriggerFor",n)("matMenuTriggerData",t.VKq(2,Tt,e))}}function Nt(i,o){if(1&i&&(t.TgZ(0,"td",31),t.YNc(1,Dt,3,4,"button",34),t.qZA()),2&i){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.status===n.applStatusObj.Unreviewed||e.status===n.applStatusObj.N)}}function wt(i,o){if(1&i&&t._UZ(0,"app-expanded-appl",40),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("appl",e)("expandedAppl",n.expandedAppl)}}function St(i,o){1&i&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t.qZA())}function Lt(i,o){if(1&i&&(t.TgZ(0,"td",36)(1,"div",37)(2,"div",38),t.YNc(3,wt,1,2,"app-expanded-appl",39),t.YNc(4,St,2,0,"div",23),t.qZA()()()),2&i){const e=o.$implicit,n=t.oxw();t.uIk("colspan",(n.gtMDQuery.matches?n.displayedColumnsMD:n.displayedColumns).length),t.xp6(1),t.Q6J("@detailExpand",n.expandingApplID===e.applicationID||(null==n.expandedAppl?null:n.expandedAppl.applicationID)===e.applicationID?"expanded":"collapsed"),t.xp6(2),t.Q6J("ngIf",(null==n.expandedAppl?null:n.expandedAppl.applicationID)===e.applicationID),t.xp6(1),t.Q6J("ngIf",n.getting&&n.expandingApplID===e.applicationID)}}function It(i,o){1&i&&(t.TgZ(0,"div",41),t._UZ(1,"mat-spinner"),t.qZA())}function Mt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().appl,s=t.oxw();return s.openReviewApplDialog(a.applicationID,s.applStatusObj.Y)}),t.TgZ(1,"mat-icon",45),t._uU(2,"check_circle"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u5be9\u6838\u901a\u904e"),t.qZA()()}}function Ut(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().appl,s=t.oxw();return s.openReviewApplDialog(a.applicationID,s.applStatusObj.N)}),t.TgZ(1,"mat-icon",45),t._uU(2,"error"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u9000\u56de\u88dc\u6b63"),t.qZA()()}}function Qt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().appl;return t.oxw().openCancelApplDialog(a.applicationID)}),t.TgZ(1,"mat-icon",47),t._uU(2,"cancel"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u53d6\u6d88\u7533\u8acb"),t.qZA()()}}function Bt(i,o){if(1&i&&(t.YNc(0,Mt,5,0,"button",42),t.YNc(1,Ut,5,0,"button",42),t.YNc(2,Qt,5,0,"button",43)),2&i){const e=o.appl,n=t.oxw();t.Q6J("ngIf",e.status===n.applStatusObj.Unreviewed),t.xp6(1),t.Q6J("ngIf",e.status===n.applStatusObj.Unreviewed),t.xp6(1),t.Q6J("ngIf",e.status===n.applStatusObj.Unreviewed||e.status===n.applStatusObj.N)}}const Yt=function(){return["expandedDetail"]};let Et=(()=>{class i{constructor(e,n,a,s,c,u){this.media=e,this.changeDetectorRef=n,this.route=a,this.matDialog=s,this.snackBarService=c,this.gsaService=u,this.destroy$=new F.x,this._gtMDQueryListener=()=>this.changeDetectorRef.detectChanges(),this.gtMDQuery=this.media.matchMedia("(min-width: 960px)"),this.fg=new l.cw({applStatusList:new l.NI(null),keyword:new l.NI(null)}),this.fcs={applStatusList:this.fg.controls.applStatusList,keyword:this.fg.controls.keyword},this.applList=[],this.dataSource=new r.by([]),this.displayedColumns=["applicationID","actions"],this.displayedColumnsMD=["applicationID","createDatetime","name","status","actions"],this.expandedAppl=null,this.applStatusSelectList=I.$2,this.applStatusObj=I.Q5,this.applStatusMap=I.Lg,this.gettingList=!1,this.getting=!1,this.cancelling=!1,this.gtMDQuery.addEventListener("change",this._gtMDQueryListener)}get fv(){return this.fg.value}ngOnInit(){this.fg.valueChanges.pipe((0,m.R)(this.destroy$),(0,W.b)(300),(0,v.b)(e=>{var n;let a=[...this.applList];const{applStatusList:s,keyword:c}=e;0!==(null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0)&&(a=a.filter(u=>s.includes(u.status))),"string"==typeof c&&c.length>0&&(a=a.filter(u=>[u.applicationID,u.name].some(V=>V.includes(c)))),this.dataSource.data=a,this.paginator.firstPage()})).subscribe(),this.onGetApplList()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onGetApplList(){this.gettingList||(this.expandedAppl=null,this.gettingList=!0,this.gsaService.GetApplList({}).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.gettingList=!1),(0,x.U)(e=>{this.applList=e.content,this.fg.setValue({applStatusList:[],keyword:""})}),(0,Z.K)(e=>this.onError(e))).subscribe())}onGetAppl(e){var n;this.getting||(null===(n=this.expandedAppl)||void 0===n?void 0:n.applicationID)===e||(this.expandingApplID=e,this.expandedAppl=null,this.getting=!0,this.gsaService.GetAppl({applicationID:e}).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.getting=!1),(0,x.U)(s=>{var c;const{hospData:u}=null===(c=this.route.parent)||void 0===c?void 0:c.snapshot.data;this.expandingApplID=void 0,this.expandedAppl=(0,pt.tB)(s.content,u)}),(0,Z.K)(s=>this.onError(s))).subscribe())}openReviewApplDialog(e,n){this.matDialog.open(rt.U,{data:{applicationID:e,status:n}}).afterClosed().pipe((0,m.R)(this.destroy$),(0,L.h)(s=>!0===s),(0,v.b)(()=>this.onGetApplList())).subscribe()}openCancelApplDialog(e){this.matDialog.open(lt.d,{data:{applicationID:e}}).afterClosed().pipe((0,m.R)(this.destroy$),(0,L.h)(a=>!0===a),(0,v.b)(()=>this.onGetApplList())).subscribe()}onError(e){const n=new T.r({message:e,type:b.p.Error});return this.snackBarService.add(n),G.E}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete(),this.gtMDQuery.removeEventListener("change",this._gtMDQueryListener)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(N.vx),t.Y36(t.sBO),t.Y36(_.gz),t.Y36(H.uw),t.Y36(k.c),t.Y36(R.S))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-govt-appl-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(y.NW,5),t.Gf(f.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:41,vars:8,consts:[[1,"page-title"],[1,"grid","grid-cols-2","gap-x-4","my-4",3,"formGroup"],[1,"col-span-2","sm:col-span-1"],["formControlName","applStatusList","multiple","","appAutoFocus",""],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","keyword","autocomplete","off"],[1,"spinner-box"],[1,"overflow-auto"],["mat-table","","multiTemplateDataRows","","matSort","",1,"w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","h-0",4,"matRowDef","matRowDefColumns"],["matColumnDef","applicationID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","border-b-0",4,"matCellDef"],["matColumnDef","createDatetime"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["pageSize","10","hidePageSize","",1,"w-full"],["class","spinner",4,"ngIf"],["actionMenu","matMenu"],["matMenuContent",""],[3,"value"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"h-0"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"border-b-0"],[1,"block","text-base","clickable-text","py-2",3,"click"],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","matMenuTriggerData",4,"ngIf"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-cell",""],[1,"overflow-hidden","flex"],[1,"w-full","spinner-box","appl","detail-col"],[3,"appl","expandedAppl",4,"ngIf"],[3,"appl","expandedAppl"],[1,"spinner"],["mat-menu-item","","class","color-primary",3,"click",4,"ngIf"],["mat-menu-item","","class","color-warn",3,"click",4,"ngIf"],["mat-menu-item","",1,"color-primary",3,"click"],[1,"color-primary"],["mat-menu-item","",1,"color-warn",3,"click"],[1,"color-warn"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\u7533\u8acb\u55ae\u5217\u8868"),t.qZA(),t.TgZ(2,"form",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"\u7533\u8acb\u55ae\u72c0\u614b"),t.qZA(),t.TgZ(6,"mat-select",3),t.YNc(7,mt,2,2,"mat-option",4),t.qZA()(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"\u7533\u8acb\u55ae\u7de8\u865f\u3001\u59d3\u540d\u95dc\u9375\u5b57"),t.qZA(),t._UZ(11,"input",5),t.qZA()(),t.TgZ(12,"mat-card")(13,"div",6)(14,"div",7)(15,"table",8),t.YNc(16,dt,1,0,"tr",9),t.YNc(17,gt,1,0,"tr",10),t.YNc(18,ft,1,0,"tr",11),t.ynx(19,12),t.YNc(20,ht,2,0,"th",13),t.YNc(21,_t,3,3,"td",14),t.BQk(),t.ynx(22,15),t.YNc(23,vt,2,0,"th",13),t.YNc(24,yt,4,4,"td",14),t.BQk(),t.ynx(25,16),t.YNc(26,Ct,2,0,"th",13),t.YNc(27,At,3,1,"td",14),t.BQk(),t.ynx(28,17),t.YNc(29,xt,2,0,"th",13),t.YNc(30,Zt,4,4,"td",14),t.BQk(),t.ynx(31,18),t.YNc(32,bt,2,0,"th",19),t.YNc(33,Nt,2,1,"td",14),t.BQk(),t.ynx(34,20),t.YNc(35,Lt,5,4,"td",21),t.BQk(),t.qZA()(),t._UZ(36,"mat-paginator",22),t.YNc(37,It,2,0,"div",23),t.qZA()(),t.TgZ(38,"mat-menu",null,24),t.YNc(40,Bt,3,3,"ng-template",25),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",n.fg),t.xp6(5),t.Q6J("ngForOf",n.applStatusSelectList),t.xp6(8),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("matHeaderRowDef",n.gtMDQuery.matches?n.displayedColumnsMD:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.gtMDQuery.matches?n.displayedColumnsMD:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(7,Yt)),t.xp6(19),t.Q6J("ngIf",n.gettingList))},directives:[l._Y,l.JL,l.sg,g.KE,g.hX,$.gD,l.JJ,l.u,ct.U,d.sg,tt.ey,J.Nt,l.Fj,U.a8,r.BZ,f.YE,r.as,r.XQ,r.nj,r.Gk,r.w1,r.fO,r.ge,f.nU,r.Dz,r.ev,d.O5,D.lW,S.p6,w.Hw,ut.C,B.Ou,y.NW,S.VK,S.KA,S.OP],pipes:[d.uU,d._K],styles:[""],data:{animation:[(0,C.X$)("detailExpand",[(0,C.SB)("collapsed",(0,C.oB)({height:"0px",minHeight:"0"})),(0,C.SB)("expanded",(0,C.oB)({height:"*"})),(0,C.eR)("expanded <=> collapsed",(0,C.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),i})();var M=p(4605),Ft=p(7837),Gt=p(1947),kt=p(4369);function Rt(i,o){1&i&&t._UZ(0,"tr",22)}function Jt(i,o){1&i&&t._UZ(0,"tr",23)}function Ot(i,o){1&i&&t._UZ(0,"tr",24)}function qt(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"\u555f\u7528"),t.qZA())}function $t(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",26)(1,"mat-slide-toggle",27),t.NdJ("change",function(a){const c=t.CHM(e).$implicit;return t.oxw().onNewsEnabledChange(a,c.newsID)}),t.ALo(2,"isInSet"),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("checked",e.enabled===n.YNObj.Y)("disabled",t.xi3(2,2,e.newsID,n.updatingIDs))}}function jt(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"\u9996\u9801\u8f2a\u64ad"),t.qZA())}function Ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",26)(1,"mat-slide-toggle",27),t.NdJ("change",function(a){const c=t.CHM(e).$implicit;return t.oxw().onNewsPinnedChange(a,c.newsID)}),t.ALo(2,"isInSet"),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("checked",e.pinned===n.YNObj.Y)("disabled",t.xi3(2,2,e.newsID,n.updatingIDs))}}function Vt(i,o){1&i&&(t.TgZ(0,"th",28),t._uU(1,"\u6a19\u984c"),t.qZA())}function Xt(i,o){if(1&i&&(t.TgZ(0,"td",26)(1,"span",29),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.title)}}function Pt(i,o){1&i&&(t.TgZ(0,"th",25),t._uU(1,"\u65e5\u671f"),t.qZA())}function zt(i,o){if(1&i&&(t.TgZ(0,"td",26)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.date,"yyyy/MM/dd")," ")}}function Kt(i,o){1&i&&(t.TgZ(0,"th",28),t._uU(1,"\u64cd\u4f5c"),t.qZA())}function Wt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",26)(1,"button",30),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().openUpdateNewsDialog(s.newsID)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function te(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",34)(1,"table",35)(2,"tr")(3,"td")(4,"label"),t._uU(5,"\u555f\u7528"),t.qZA()(),t.TgZ(6,"td")(7,"mat-slide-toggle",27),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().onNewsEnabledChange(a,s.newsID)}),t.ALo(8,"isInSet"),t.qZA()()(),t.TgZ(9,"tr")(10,"td")(11,"label"),t._uU(12,"\u9996\u9801\u8f2a\u64ad"),t.qZA()(),t.TgZ(13,"td")(14,"mat-slide-toggle",27),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().onNewsPinnedChange(a,s.newsID)}),t.ALo(15,"isInSet"),t.qZA()()()()()}if(2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(7),t.Q6J("checked",e.enabled===n.YNObj.Y)("disabled",t.xi3(8,4,e.newsID,n.updatingIDs)),t.xp6(7),t.Q6J("checked",e.pinned===n.YNObj.Y)("disabled",t.xi3(15,7,e.newsID,n.updatingIDs))}}function ee(i,o){if(1&i&&(t.TgZ(0,"td",31)(1,"div",32),t.YNc(2,te,16,10,"div",33),t.qZA()()),2&i){const e=t.oxw();t.uIk("colspan",(e.gtSMQuery.matches?e.displayedColumnsSM:e.displayedColumns).length),t.xp6(2),t.Q6J("ngIf",!e.gtSMQuery.matches)}}function ie(i,o){1&i&&(t.TgZ(0,"div",36),t._UZ(1,"mat-spinner"),t.qZA())}const ne=function(){return["expandedDetail"]};let oe=(()=>{class i{constructor(e,n,a,s,c){this.media=e,this.changeDetectorRef=n,this.matDialog=a,this.snackBarService=s,this.gsaService=c,this.destroy$=new F.x,this._gtSMQueryListener=()=>this.changeDetectorRef.detectChanges(),this.gtSMQuery=this.media.matchMedia("(min-width: 600px)"),this.dataSource=new r.by([]),this.displayedColumns=["title","date","actions"],this.displayedColumnsSM=["enabled","pinned","title","date","actions"],this.YNObj=M.mN,this.getting=!1,this.updatingIDs=new Set,this.gtSMQuery.addEventListener("change",this._gtSMQueryListener)}ngOnInit(){this.onGetNewsList()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onGetNewsList(){this.getting||(this.getting=!0,this.gsaService.GetNewsList({}).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.getting=!1),(0,x.U)(e=>{this.dataSource.data=e.content}),(0,Z.K)(e=>this.onError(e))).subscribe())}openAddNewsDialog(){this.matDialog.open(Gt._).afterClosed().pipe((0,m.R)(this.destroy$),(0,L.h)(e=>!0===e),(0,v.b)(()=>this.onGetNewsList())).subscribe()}onNewsEnabledChange(e,n){if(this.updatingIDs.has(n))return;this.updatingIDs.add(n);const a={newsID:n,enabled:e.checked?M.YN.Y:M.YN.N};this.gsaService.UpdateNews(a).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.updatingIDs.delete(n)),(0,x.U)(s=>{const c=new T.r({message:s.message,type:b.p.Success});this.snackBarService.add(c),this.dataSource.data=this.dataSource.data.map(u=>u.newsID===n?Object.assign(Object.assign({},u),{enabled:a.enabled}):u)}),(0,Z.K)(s=>this.onError(s))).subscribe()}onNewsPinnedChange(e,n){if(this.updatingIDs.has(n))return;this.updatingIDs.add(n);const a={newsID:n,pinned:e.checked?M.YN.Y:M.YN.N};this.gsaService.UpdateNews(a).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.updatingIDs.delete(n)),(0,x.U)(s=>{const c=new T.r({message:s.message,type:b.p.Success});this.snackBarService.add(c),this.dataSource.data=this.dataSource.data.map(u=>u.newsID===n?Object.assign(Object.assign({},u),{pinned:a.pinned}):u)}),(0,Z.K)(s=>this.onError(s))).subscribe()}openUpdateNewsDialog(e){this.matDialog.open(Ft.L,{data:{newsID:e}}).afterClosed().pipe((0,m.R)(this.destroy$),(0,L.h)(a=>!0===a),(0,v.b)(()=>this.onGetNewsList())).subscribe()}onError(e){const n=new T.r({message:e,type:b.p.Error});return this.snackBarService.add(n),G.E}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete(),this.gtSMQuery.removeEventListener("change",this._gtSMQueryListener)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(N.vx),t.Y36(t.sBO),t.Y36(H.uw),t.Y36(k.c),t.Y36(R.S))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-news-mgmt"]],viewQuery:function(e,n){if(1&e&&(t.Gf(y.NW,5),t.Gf(f.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},decls:33,vars:6,consts:[[1,"page-title"],[1,"flex"],[1,"grow"],["type","button","mat-mini-fab","","color","accent","matTooltip","\u65b0\u589e\u6700\u65b0\u6d88\u606f",1,"mx-6","my-4",3,"click"],[1,"spinner-box"],[1,"overflow-auto"],["mat-table","","multiTemplateDataRows","","matSort","",1,"w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","h-0",4,"matRowDef","matRowDefColumns"],["matColumnDef","enabled"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","border-b-0",4,"matCellDef"],["matColumnDef","pinned"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","actions"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["pageSize","10","hidePageSize","",1,"w-full"],["class","spinner",4,"ngIf"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"h-0"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"border-b-0"],["color","primary",3,"checked","disabled","change"],["mat-header-cell",""],[1,"block","text-base","py-2"],["mat-icon-button","","color","primary","matTooltip","\u7de8\u8f2f\u6700\u65b0\u6d88\u606f",3,"click"],["mat-cell",""],[1,"w-full","news","detail-col"],["class","grid grid-cols-1 border-t border-black border-opacity-6",4,"ngIf"],[1,"grid","grid-cols-1","border-t","border-black","border-opacity-6"],[1,"col-span-1"],[1,"spinner"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\u6700\u65b0\u6d88\u606f\u7dad\u8b77"),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"span",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.openAddNewsDialog()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()()(),t.TgZ(7,"mat-card")(8,"div",4)(9,"div",5)(10,"table",6),t.YNc(11,Rt,1,0,"tr",7),t.YNc(12,Jt,1,0,"tr",8),t.YNc(13,Ot,1,0,"tr",9),t.ynx(14,10),t.YNc(15,qt,2,0,"th",11),t.YNc(16,$t,3,5,"td",12),t.BQk(),t.ynx(17,13),t.YNc(18,jt,2,0,"th",11),t.YNc(19,Ht,3,5,"td",12),t.BQk(),t.ynx(20,14),t.YNc(21,Vt,2,0,"th",15),t.YNc(22,Xt,3,1,"td",12),t.BQk(),t.ynx(23,16),t.YNc(24,Pt,2,0,"th",11),t.YNc(25,zt,4,4,"td",12),t.BQk(),t.ynx(26,17),t.YNc(27,Kt,2,0,"th",15),t.YNc(28,Wt,4,0,"td",12),t.BQk(),t.ynx(29,18),t.YNc(30,ee,3,2,"td",19),t.BQk(),t.qZA()(),t._UZ(31,"mat-paginator",20),t.YNc(32,ie,2,0,"div",21),t.qZA()()),2&e&&(t.xp6(10),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("matHeaderRowDef",n.gtSMQuery.matches?n.displayedColumnsSM:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.gtSMQuery.matches?n.displayedColumnsSM:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(5,ne)),t.xp6(19),t.Q6J("ngIf",n.getting))},directives:[D.lW,j.gM,w.Hw,U.a8,r.BZ,f.YE,r.as,r.XQ,r.nj,r.Gk,r.w1,r.fO,r.ge,f.nU,r.Dz,r.ev,z.Rr,d.O5,y.NW,B.Ou],pipes:[kt.Z,d.uU],styles:[""]}),i})();var ae=p(8675),se=p(2501),h=(()=>{return(i=h||(h={})).ByApplStatus="status",i.ByApplID="id",h;var i})();const pe={ByApplStatus:h.ByApplStatus,ByApplID:h.ByApplID};function le(i,o){if(1&i&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function re(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"\u8acb\u52fe\u9078\u767c\u9001\u5c0d\u8c61\u7684\xa0"),t.TgZ(2,"strong"),t._uU(3,"\u7533\u8acb\u55ae\u72c0\u614b"),t.qZA()())}function ce(i,o){if(1&i&&(t.TgZ(0,"mat-chip",32),t.NdJ("click",function(n){return n.stopPropagation()}),t._uU(1),t.qZA()),2&i){const e=o.$implicit,n=t.oxw();t.Q6J("disabled",n.fcs.applIDList.disabled)("selectable",!1),t.xp6(1),t.hij(" ",e," ")}}function ue(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"\u8acb\u52a0\u5165\u767c\u9001\u5c0d\u8c61\u7684\xa0"),t.TgZ(2,"strong"),t._uU(3,"\u7533\u8acb\u55ae"),t.qZA()())}function me(i,o){1&i&&t._UZ(0,"tr",33)}function de(i,o){1&i&&t._UZ(0,"tr",34)}function ge(i,o){1&i&&t._UZ(0,"tr",35)}function fe(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1,"\u7533\u8acb\u55ae\u7de8\u865f"),t.qZA())}function he(i,o){if(1&i&&(t.TgZ(0,"td",37)(1,"span",38),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.applicationID)}}function _e(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1,"\u7533\u8acb\u65e5\u671f"),t.qZA())}function ve(i,o){if(1&i&&(t.TgZ(0,"td",37)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.createDatetime,"yyyy/MM/dd")," ")}}function ye(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1,"\u59d3\u540d"),t.qZA())}function Ce(i,o){if(1&i&&(t.TgZ(0,"td",37)(1,"span"),t._uU(2),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function Ae(i,o){1&i&&(t.TgZ(0,"th",36),t._uU(1,"\u7533\u8acb\u72c0\u614b"),t.qZA())}function xe(i,o){if(1&i&&(t.TgZ(0,"td",37)(1,"span"),t._uU(2),t.ALo(3,"i18nSelect"),t.qZA()()),2&i){const e=o.$implicit,n=t.oxw();t.xp6(2),t.Oqu(t.xi3(3,1,e.status,n.applStatusMap))}}function Ze(i,o){if(1&i&&(t.TgZ(0,"div",42)(1,"table",7)(2,"tr")(3,"td")(4,"label"),t._uU(5,"\u7533\u8acb\u65e5\u671f"),t.qZA()(),t.TgZ(6,"td")(7,"span"),t._uU(8),t.ALo(9,"date"),t.qZA()()(),t.TgZ(10,"tr")(11,"td")(12,"label"),t._uU(13,"\u59d3\u540d"),t.qZA()(),t.TgZ(14,"td")(15,"span"),t._uU(16),t.qZA()()(),t.TgZ(17,"tr")(18,"td")(19,"label"),t._uU(20,"\u7533\u8acb\u72c0\u614b"),t.qZA()(),t.TgZ(21,"td")(22,"span"),t._uU(23),t.ALo(24,"i18nSelect"),t.qZA()()()()()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(8),t.Oqu(t.xi3(9,3,e.createDatetime,"yyyy/MM/dd")),t.xp6(8),t.Oqu(e.name),t.xp6(7),t.Oqu(t.xi3(24,6,e.status,n.applStatusMap))}}function be(i,o){if(1&i&&(t.TgZ(0,"td",39)(1,"div",40),t.YNc(2,Ze,25,9,"div",41),t.qZA()()),2&i){const e=t.oxw();t.uIk("colspan",(e.gtSMQuery.matches?e.displayedColumnsSM:e.displayedColumns).length),t.xp6(2),t.Q6J("ngIf",!e.gtSMQuery.matches)}}function Te(i,o){1&i&&(t.TgZ(0,"div",43),t._UZ(1,"mat-spinner"),t.qZA())}const De=function(){return["expandedDetail"]};let Ne=(()=>{class i{constructor(e,n,a,s,c){this.media=e,this.changeDetectorRef=n,this.matDialog=a,this.snackBarService=s,this.gsaService=c,this.destroy$=new F.x,this._gtSMQueryListener=()=>this.changeDetectorRef.detectChanges(),this.gtSMQuery=this.media.matchMedia("(min-width: 600px)"),this.applList=[],this.dataSource=new r.by([]),this.displayedColumns=["applicationID"],this.displayedColumnsSM=["applicationID","createDatetime","name","status"],this.receiverTypeObj=pe,this.applStatusSelectList=I.$2,this.applStatusMap=I.Lg,this.gettingList=!1,this.gtSMQuery.addEventListener("change",this._gtSMQueryListener)}ngOnInit(){this.initFCs(),this.fg.valueChanges.pipe((0,m.R)(this.destroy$),(0,W.b)(300),(0,v.b)(n=>{switch(n.receiverType){case h.ByApplStatus:this.dataSource.data=this.applList.filter(a=>{var s;return null===(s=n.applStatusList)||void 0===s?void 0:s.includes(a.status)});break;case h.ByApplID:this.dataSource.data=this.applList.filter(a=>{var s;return null===(s=n.applIDList)||void 0===s?void 0:s.includes(a.applicationID)});break;default:this.dataSource.data=[]}})).subscribe();const e=this.fcs.receiverType.value;this.fcs.receiverType.valueChanges.pipe((0,m.R)(this.destroy$),(0,ae.O)(e),(0,v.b)(n=>{switch(n){case h.ByApplStatus:this.fcs.applStatusList.enable(),this.fcs.applIDList.disable();break;case h.ByApplID:this.fcs.applStatusList.disable(),this.fcs.applIDList.enable()}})).subscribe(),this.onGetApplList()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}initFCs(){this.fcs={receiverType:this.fg.controls.receiverType,applStatusList:this.fg.controls.applStatusList,applIDList:this.fg.controls.applIDList}}onGetApplList(){this.gettingList||(this.gettingList=!0,this.gsaService.GetApplList({}).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.gettingList=!1),(0,x.U)(e=>{this.applList=e.content}),(0,Z.K)(e=>this.onError(e))).subscribe())}openApplListPicker(e){var n;if(e.stopPropagation(),this.fcs.applIDList.disabled)return;const a={defaultPickedIDList:null!==(n=this.fcs.applIDList.value)&&void 0!==n?n:[]};this.matDialog.open(se.q,{data:a}).afterClosed().pipe((0,m.R)(this.destroy$),(0,L.h)(s=>void 0!==s),(0,v.b)(s=>{var c;this.fcs.applIDList.setValue(null!==(c=null==s?void 0:s.map(u=>u.applicationID))&&void 0!==c?c:[])})).subscribe()}onError(e){const n=new T.r({message:e,type:b.p.Error});return this.snackBarService.add(n),G.E}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete(),this.gtSMQuery.removeEventListener("change",this._gtSMQueryListener)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(N.vx),t.Y36(t.sBO),t.Y36(H.uw),t.Y36(k.c),t.Y36(R.S))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-notify-receiver-step"]],viewQuery:function(e,n){if(1&e&&(t.Gf(y.NW,5),t.Gf(f.YE,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first)}},inputs:{fg:"fg"},decls:48,vars:21,consts:[[1,"spinner-box"],[1,"grid","grid-cols-1","my-4",3,"formGroup"],[1,"col-span-1","h-form-field","form-field-style","flex","items-center"],[1,"form-field-label","mr-4"],["formControlName","receiverType"],[1,"mr-4",3,"value"],[3,"value"],[1,"col-span-1"],["formControlName","applStatusList","multiple","","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-span-1",3,"click"],["multiple","","formControlName","applIDList"],["applIDList",""],[3,"disabled","selectable","click",4,"ngFor","ngForOf"],["type","text","required","","readonly","","tabindex","-1",3,"matChipInputFor"],["type","button","matSuffix","","mat-icon-button","","color","primary","matTooltip","\u9078\u64c7\u7533\u8acb\u55ae",3,"disabled","click"],[1,"overflow-auto"],["mat-table","","multiTemplateDataRows","","matSort","",1,"w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","h-0",4,"matRowDef","matRowDefColumns"],["matColumnDef","applicationID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","border-b-0",4,"matCellDef"],["matColumnDef","createDatetime"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["pageSize","10","hidePageSize","",1,"w-full"],["class","spinner",4,"ngIf"],[3,"disabled","selectable","click"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"h-0"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"border-b-0"],[1,"block","text-base","py-2"],["mat-cell",""],[1,"w-full","receiver","detail-col"],["class","grid grid-cols-1 border-t border-black border-opacity-6",4,"ngIf"],[1,"grid","grid-cols-1","border-t","border-black","border-opacity-6"],[1,"spinner"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"\u767c\u9001\u65b9\u5f0f *"),t.qZA(),t.TgZ(5,"mat-radio-group",4)(6,"mat-radio-button",5),t._uU(7,"\u4f9d\u72c0\u614b"),t.qZA(),t.TgZ(8,"mat-radio-button",6),t._uU(9,"\u4f9d\u7de8\u865f"),t.qZA()()(),t.TgZ(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"\u7533\u8acb\u55ae\u72c0\u614b"),t.qZA(),t.TgZ(13,"mat-select",8),t.YNc(14,le,2,2,"mat-option",9),t.qZA(),t.YNc(15,re,4,0,"mat-error",10),t.qZA(),t.TgZ(16,"mat-form-field",11),t.NdJ("click",function(s){return n.openApplListPicker(s)}),t.TgZ(17,"mat-label"),t._uU(18,"\u7533\u8acb\u55ae\u7de8\u865f"),t.qZA(),t.TgZ(19,"mat-chip-list",12,13),t.YNc(21,ce,2,3,"mat-chip",14),t._UZ(22,"input",15),t.qZA(),t.TgZ(23,"button",16),t.NdJ("click",function(s){return n.openApplListPicker(s)}),t.TgZ(24,"mat-icon"),t._uU(25,"post_add"),t.qZA()(),t.YNc(26,ue,4,0,"mat-error",10),t.qZA()(),t.TgZ(27,"div",17)(28,"table",18),t.YNc(29,me,1,0,"tr",19),t.YNc(30,de,1,0,"tr",20),t.YNc(31,ge,1,0,"tr",21),t.ynx(32,22),t.YNc(33,fe,2,0,"th",23),t.YNc(34,he,3,1,"td",24),t.BQk(),t.ynx(35,25),t.YNc(36,_e,2,0,"th",23),t.YNc(37,ve,4,4,"td",24),t.BQk(),t.ynx(38,26),t.YNc(39,ye,2,0,"th",23),t.YNc(40,Ce,3,1,"td",24),t.BQk(),t.ynx(41,27),t.YNc(42,Ae,2,0,"th",23),t.YNc(43,xe,4,4,"td",24),t.BQk(),t.ynx(44,28),t.YNc(45,be,3,2,"td",29),t.BQk(),t.qZA()(),t._UZ(46,"mat-paginator",30),t.YNc(47,Te,2,0,"div",31),t.qZA()),2&e){const a=t.MAs(20);t.xp6(1),t.Q6J("formGroup",n.fg),t.xp6(1),t.ekj("form-field-invalid",(n.fcs.receiverType.touched||n.fcs.receiverType.dirty)&&n.fcs.receiverType.invalid),t.xp6(4),t.Q6J("value",n.receiverTypeObj.ByApplStatus),t.xp6(2),t.Q6J("value",n.receiverTypeObj.ByApplID),t.xp6(6),t.Q6J("ngForOf",n.applStatusSelectList),t.xp6(1),t.Q6J("ngIf",n.fcs.applStatusList.hasError("required")),t.xp6(1),t.ekj("cursor-pointer",n.fcs.applIDList.enabled),t.xp6(5),t.Q6J("ngForOf",n.fcs.applIDList.value),t.xp6(1),t.ekj("cursor-pointer",n.fcs.applIDList.enabled),t.Q6J("matChipInputFor",a),t.xp6(1),t.Q6J("disabled",n.fcs.applIDList.disabled),t.xp6(3),t.Q6J("ngIf",n.fcs.applIDList.hasError("required")),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("matHeaderRowDef",n.gtSMQuery.matches?n.displayedColumnsSM:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.gtSMQuery.matches?n.displayedColumnsSM:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(20,De)),t.xp6(16),t.Q6J("ngIf",n.gettingList)}},directives:[l.JL,l.sg,q.VQ,l.JJ,l.u,q.U0,g.KE,g.hX,$.gD,l.Q7,d.sg,tt.ey,d.O5,g.TO,Q.qn,Q.HS,Q.oH,D.lW,g.R9,j.gM,w.Hw,r.BZ,f.YE,r.as,r.XQ,r.nj,r.Gk,r.w1,r.fO,r.ge,f.nU,r.Dz,r.ev,y.NW,B.Ou],pipes:[d.uU,d._K],styles:[""]}),i})();function we(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"\u8acb\u8f38\u5165\xa0"),t.TgZ(2,"strong"),t._uU(3,"\u4e3b\u65e8"),t.qZA()())}function Se(i,o){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"\u8acb\u8f38\u5165\xa0"),t.TgZ(2,"strong"),t._uU(3,"\u5167\u5bb9"),t.qZA()())}let Le=(()=>{class i{constructor(){}ngOnInit(){this.initFCs()}initFCs(){this.fcs={subject:this.fg.controls.subject,body:this.fg.controls.body,passed:this.fg.controls.passed}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-notify-content-step"]],inputs:{fg:"fg"},decls:15,vars:5,consts:[[1,"grid","grid-cols-1","my-4",3,"formGroup"],[1,"col-span-1"],["type","text","matInput","","formControlName","subject","required","","maxlength","50","autocomplete","off"],["align","end"],[4,"ngIf"],["matInput","","formControlName","body","required","","maxlength","200","rows","8","autocomplete","off"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"\u4e3b\u65e8"),t.qZA(),t._UZ(4,"input",2),t.TgZ(5,"mat-hint",3),t._uU(6),t.qZA(),t.YNc(7,we,4,0,"mat-error",4),t.qZA(),t.TgZ(8,"mat-form-field",1)(9,"mat-label"),t._uU(10,"\u5167\u5bb9"),t.qZA(),t._UZ(11,"textarea",5),t.TgZ(12,"mat-hint",3),t._uU(13),t.qZA(),t.YNc(14,Se,4,0,"mat-error",4),t.qZA()()),2&e){let a,s;t.Q6J("formGroup",n.fg),t.xp6(6),t.hij("",null!==(a=null==n.fcs.subject.value?null:n.fcs.subject.value.length)&&void 0!==a?a:0," / 50"),t.xp6(1),t.Q6J("ngIf",n.fcs.subject.hasError("required")),t.xp6(6),t.hij("",null!==(s=null==n.fcs.body.value?null:n.fcs.body.value.length)&&void 0!==s?s:0," / 200"),t.xp6(1),t.Q6J("ngIf",n.fcs.body.hasError("required"))}},directives:[l.JL,l.sg,g.KE,g.hX,J.Nt,l.Fj,l.JJ,l.u,l.Q7,l.nD,g.bx,d.O5,g.TO],styles:[""]}),i})();const Me=[{path:"",component:ot,resolve:{hospData:at.v},children:[{path:"",pathMatch:"full",redirectTo:"govt-appl-list"},{path:"govt-appl-list",component:Et},{path:"appl-statistics",component:st},{path:"news-mgmt",component:oe},{path:"notification",component:(()=>{class i{constructor(e,n,a,s){this.media=e,this.changeDetectorRef=n,this.snackBarService=a,this.gsaService=s,this.destroy$=new F.x,this._gtMDQueryListener=()=>this.changeDetectorRef.detectChanges(),this.gtMDQuery=this.media.matchMedia("(min-width: 960px)"),this.flagsOfEditable={receiver:!0,content:!0},this.receiverFG=new l.cw({receiverType:new l.NI(null,[l.kI.required]),applStatusList:new l.NI({value:null,disabled:!0},[l.kI.required]),applIDList:new l.NI({value:null,disabled:!0},[l.kI.required])}),this.receiverFCs={receiverType:this.receiverFG.controls.receiverType,applStatusList:this.receiverFG.controls.applStatusList,applIDList:this.receiverFG.controls.applIDList},this.contentFG=new l.cw({subject:new l.NI(null,[l.kI.required,l.kI.maxLength(50)]),body:new l.NI(null,[l.kI.required,l.kI.maxLength(200)]),passed:new l.NI(null,[l.kI.requiredTrue])}),this.contentFCs={subject:this.contentFG.controls.subject,body:this.contentFG.controls.body,passed:this.contentFG.controls.passed},this.notifying=!1,this.gtMDQuery.addEventListener("change",this._gtMDQueryListener)}get receiverFV(){return this.receiverFG.value}get contentFV(){return this.contentFG.value}ngOnInit(){}onReceiverFormSubmit(e){e.preventDefault(),this.forceValidation(this.receiverFG),this.stepper.next()}onContentFormSubmit(e){if(e.preventDefault(),this.forceValidation(this.contentFG),this.notifying||!this.checkFG(this.contentFG,["passed"]))return;this.notifying=!0;const{receiverType:n,applStatusList:a,applIDList:s}=this.receiverFV,{subject:c,body:u}=this.contentFV;this.gsaService.BatchNotify({type:n,applStatusList:a,applIDList:s,subject:c,body:u}).pipe((0,m.R)(this.destroy$),(0,A.x)(()=>this.notifying=!1),(0,x.U)(X=>{const Be=new T.r({message:X.message,type:b.p.Success});this.snackBarService.add(Be),this.contentFCs.passed.setValue(!0),this.flagsOfEditable.receiver=!1,this.flagsOfEditable.content=!1,this.stepper.next()}),(0,Z.K)(X=>this.onError(X))).subscribe()}reset(){this.flagsOfEditable.receiver=!0,this.flagsOfEditable.content=!0,this.stepper.reset()}forceValidation(e){e.markAllAsTouched(),e.updateValueAndValidity()}checkFG(e,n=[]){return null===e.errors&&Object.entries(e.controls).filter(([a,s])=>!n.includes(a)).every(([a,s])=>null===s.errors)}onError(e){const n=new T.r({message:e,type:b.p.Error});return this.snackBarService.add(n),G.E}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(N.vx),t.Y36(t.sBO),t.Y36(k.c),t.Y36(R.S))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-notification"]],viewQuery:function(e,n){if(1&e&&t.Gf(E.Vq,5),2&e){let a;t.iGM(a=t.CRH())&&(n.stepper=a.first)}},decls:27,vars:8,consts:[[1,"w-page","py-4"],[1,"page-title"],["linear","",3,"orientation"],["stepper",""],["label","\u767c\u9001\u5c0d\u8c61",3,"stepControl","editable"],[3,"submit"],[3,"fg"],[1,"actions-box"],[1,"grow"],["type","submit","mat-flat-button","","color","primary"],["label","\u901a\u77e5\u5167\u5bb9",3,"stepControl","editable"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],["label","\u767c\u9001\u5b8c\u6210"],["type","button","mat-flat-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"div",1),t._uU(2,"\u767c\u9001\u901a\u77e5"),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-stepper",2,3)(6,"mat-step",4)(7,"form",5),t.NdJ("submit",function(s){return n.onReceiverFormSubmit(s)}),t._UZ(8,"app-notify-receiver-step",6),t.TgZ(9,"div",7),t._UZ(10,"span",8),t.TgZ(11,"button",9),t._uU(12," \u4e0b\u4e00\u6b65 "),t.qZA()()()(),t.TgZ(13,"mat-step",10)(14,"form",5),t.NdJ("submit",function(s){return n.onContentFormSubmit(s)}),t._UZ(15,"app-notify-content-step",6),t.TgZ(16,"div",7),t._UZ(17,"span",8),t.TgZ(18,"button",11),t._uU(19," \u4e0b\u4e00\u6b65 "),t.qZA()()()(),t.TgZ(20,"mat-step",12)(21,"span"),t._uU(22,"\u767c\u9001\u5b8c\u6210"),t.qZA(),t.TgZ(23,"div",7),t._UZ(24,"span",8),t.TgZ(25,"button",13),t.NdJ("click",function(){return n.reset()}),t._uU(26," \u518d\u767c\u9001\u4e00\u5c01 "),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Q6J("orientation",n.gtMDQuery.matches?"horizontal":"vertical"),t.xp6(2),t.Q6J("stepControl",n.receiverFG)("editable",n.flagsOfEditable.receiver),t.xp6(2),t.Q6J("fg",n.receiverFG),t.xp6(5),t.Q6J("stepControl",n.contentFG)("editable",n.flagsOfEditable.content),t.xp6(2),t.Q6J("fg",n.contentFG),t.xp6(3),t.Q6J("disabled",n.notifying))},directives:[U.a8,E.Vq,E.C0,l._Y,l.JL,Ne,D.lW,Le],styles:[""]}),i})()}]}];let Ue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.Bz.forChild(Me)],_.Bz]}),i})(),Qe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,l.UX,Ue,D.ot,U.QW,Q.Hi,g.lN,w.Ps,J.c,O.ie,S.Tx,y.TU,B.Cq,q.Fk,$.LD,Y.SJ,z.rP,f.JX,E.T5,r.p0,K.g0,j.AV,et.m]]}),i})()}}]);