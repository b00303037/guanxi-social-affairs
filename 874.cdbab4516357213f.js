"use strict";(self.webpackChunkguanxi_social_affairs=self.webpackChunkguanxi_social_affairs||[]).push([[874],{874:(ne,I,s)=>{s.r(I),s.d(I,{HospModule:()=>ee});var d=s(9808),m=s(3075),D=s(7423),M=s(9224),S=s(7322),y=s(5245),E=s(7531),Q=s(4449),A=s(2181),_=s(6087),U=s(773),B=s(4107),Z=s(2638),J=s(2368),h=s(4847),l=s(4999),O=s(4594),G=s(3058),g=s(6157),T=s(5113),t=s(5e3);const q=function(){return{exact:!0}};function P(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item",17,18),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(21).close()}),t.TgZ(2,"button",19)(3,"mat-icon"),t._uU(4),t.qZA()(),t.TgZ(5,"span"),t._uU(6),t.qZA()()}if(2&o){const e=a.$implicit,n=t.MAs(1);t.ekj("text-rose-400",n.isActive),t.Q6J("routerLink",e.routerLink)("routerLinkActiveOptions",t.DdM(6,q)),t.xp6(4),t.Oqu(e.icon),t.xp6(2),t.Oqu(e.label)}}let z=(()=>{class o{constructor(e,n,i){this.media=e,this.changeDetectorRef=n,this.router=i,this._mobileQueryListener=()=>this.changeDetectorRef.detectChanges(),this.mobileQuery=this.media.matchMedia(T.u3.XSmall),this.navListItems=[{icon:"home",label:"\u9996\u9801",routerLink:"/home"},{icon:"view_list",label:"\u7533\u8acb\u55ae\u5217\u8868",routerLink:"/hosp/hosp-appl-list"},{icon:"local_hospital",label:"\u5065\u6aa2\u9805\u76ee\u7dad\u8b77",routerLink:"/hosp/hcprogram-mgmt"}],this.mobileQuery.addEventListener("change",this._mobileQueryListener)}ngOnInit(){}logout(){this.router.navigate(["/home"])}ngOnDestroy(){this.mobileQuery.removeEventListener("change",this._mobileQueryListener)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.vx),t.Y36(t.sBO),t.Y36(g.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hosp-layouts"]],decls:28,vars:8,consts:[[1,"flex","flex-col","absolute","top-0","right-0","bottom-0","left-0"],[1,"shadow"],[1,"bg-rose-400","text-white"],[1,"w-page","flex"],["type","menu","mat-icon-button","",3,"click"],[1,"grow"],["routerLink","/home",1,"hidden","sm:flex","sm:items-center"],["src","assets/logo.png","width","40","height","40","alt","logo",1,"mr-2"],[1,"text-sm"],[1,"text-base"],[1,"actions-box"],["type","button","mat-button","",3,"click"],[3,"ngClass"],["fixedTopGap","56",1,"w-60","bg-rose-100",3,"mode","fixedInViewport"],["sidenav",""],["routerLinkActive","",3,"routerLink","routerLinkActiveOptions","text-rose-400","click",4,"ngFor","ngForOf"],[1,"w-page","py-4"],["routerLinkActive","",3,"routerLink","routerLinkActiveOptions","click"],["rla","routerLinkActive"],["type","button","mat-icon-button",""]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"header",1)(2,"mat-toolbar",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return t.CHM(i),t.MAs(21).toggle()}),t.TgZ(5,"mat-icon"),t._uU(6,"menu"),t.qZA()(),t._UZ(7,"span",5),t.TgZ(8,"a",6),t._UZ(9,"img",7),t.TgZ(10,"div")(11,"div",8),t._uU(12,"\u65b0\u7af9\u7e23\u95dc\u897f\u93ae\u516c\u6240"),t.qZA(),t.TgZ(13,"div",9),t._uU(14,"Guanxi Township Office"),t.qZA()()(),t._UZ(15,"span",5),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){return n.logout()}),t._uU(18," \u91ab\u9662\u7aef\u767b\u51fa "),t.qZA()()()()(),t.TgZ(19,"mat-sidenav-container",12)(20,"mat-sidenav",13,14)(22,"mat-nav-list"),t.YNc(23,P,7,7,"mat-list-item",15),t.qZA()(),t.TgZ(24,"mat-sidenav-content")(25,"main")(26,"div",16),t._UZ(27,"router-outlet"),t.qZA()()()()()}2&e&&(t.xp6(2),t.ekj("fixed",n.mobileQuery.matches),t.xp6(17),t.Udp("margin-top",n.mobileQuery.matches?56:0,"px"),t.Q6J("ngClass",n.mobileQuery.matches?"grow shrink-0 basis-auto":"grow shrink basis-0"),t.xp6(1),t.Q6J("mode",n.mobileQuery.matches?"over":"side")("fixedInViewport",n.mobileQuery.matches),t.xp6(3),t.Q6J("ngForOf",n.navListItems))},directives:[O.Ye,D.lW,y.Hw,g.yS,Z.TM,d.mk,Z.JX,Q.Hk,d.sg,Q.Tg,g.Od,g.rH,Z.Rh,g.lC],styles:[""]}),o})();var X=s(3166),k=s(7579),u=s(2722),b=s(8746),H=s(4004),L=s(262),v=s(9300),C=s(8505),F=s(515),Y=s(4605),w=s(9577),N=s(3358),K=s(2883),V=s(8983),R=s(8966),$=s(2803),j=s(2359),W=s(7238),tt=s(4369);function et(o,a){1&o&&t._UZ(0,"tr",22)}function ot(o,a){1&o&&t._UZ(0,"tr",23)}function nt(o,a){1&o&&t._UZ(0,"tr",24)}function at(o,a){1&o&&(t.TgZ(0,"th",25),t._uU(1,"\u555f\u7528"),t.qZA())}function it(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",26)(1,"mat-slide-toggle",27),t.NdJ("change",function(i){const r=t.CHM(e).$implicit;return t.oxw().onHCProgramEnabledChange(i,r.programID)}),t.ALo(2,"isInSet"),t.qZA()()}if(2&o){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("checked",e.enabled===n.YNObj.Y)("disabled",t.xi3(2,2,e.programID,n.updatingIDs))}}function st(o,a){1&o&&(t.TgZ(0,"th",25),t._uU(1,"\u540d\u7a31"),t.qZA())}function pt(o,a){if(1&o&&(t.TgZ(0,"td",26)(1,"span",28),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.name)}}function lt(o,a){1&o&&(t.TgZ(0,"th",29),t._uU(1,"\u63cf\u8ff0"),t.qZA())}function rt(o,a){if(1&o&&(t.TgZ(0,"td",26)(1,"span"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.description)}}function ct(o,a){1&o&&(t.TgZ(0,"th",25),t._uU(1,"\u8cbb\u7528"),t.qZA())}function mt(o,a){if(1&o&&(t.TgZ(0,"td",26)(1,"span",30),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.gM2(3,1,e.charge,"TWD","symbol","1.0-2")," ")}}function ut(o,a){1&o&&(t.TgZ(0,"th",29),t._uU(1,"\u64cd\u4f5c"),t.qZA())}function dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",26)(1,"button",31),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw().openUpdateHCProgramDialog(p)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function gt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",35)(1,"table",36)(2,"tr")(3,"td")(4,"label"),t._uU(5,"\u555f\u7528"),t.qZA()(),t.TgZ(6,"td")(7,"mat-slide-toggle",27),t.NdJ("change",function(i){t.CHM(e);const p=t.oxw().$implicit;return t.oxw().onHCProgramEnabledChange(i,p.programID)}),t.ALo(8,"isInSet"),t.qZA()()(),t.TgZ(9,"tr")(10,"td")(11,"label"),t._uU(12,"\u63cf\u8ff0"),t.qZA()(),t.TgZ(13,"td")(14,"span"),t._uU(15),t.qZA()()()()()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(7),t.Q6J("checked",e.enabled===n.YNObj.Y)("disabled",t.xi3(8,3,e.programID,n.updatingIDs)),t.xp6(8),t.Oqu(e.description)}}function ht(o,a){if(1&o&&(t.TgZ(0,"td",32)(1,"div",33),t.YNc(2,gt,16,6,"div",34),t.qZA()()),2&o){const e=t.oxw();t.uIk("colspan",(e.gtSMQuery.matches?e.displayedColumnsSM:e.displayedColumns).length),t.xp6(2),t.Q6J("ngIf",!e.gtSMQuery.matches)}}function ft(o,a){1&o&&(t.TgZ(0,"div",37),t._UZ(1,"mat-spinner"),t.qZA())}const Ct=function(){return["expandedDetail"]};let xt=(()=>{class o{constructor(e,n,i,p,r){this.media=e,this.changeDetectorRef=n,this.matDialog=i,this.snackBarService=p,this.gsaService=r,this.destroy$=new k.x,this._gtSMQueryListener=()=>this.changeDetectorRef.detectChanges(),this.gtSMQuery=this.media.matchMedia("(min-width: 600px)"),this.dataSource=new l.by([]),this.displayedColumns=["name","charge","actions"],this.displayedColumnsSM=["enabled","name","description","charge","actions"],this.YNObj=Y.mN,this.getting=!1,this.updatingIDs=new Set,this.gtSMQuery.addEventListener("change",this._gtSMQueryListener)}ngOnInit(){this.onGetHospData()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onGetHospData(){this.getting||(this.getting=!0,this.gsaService.GetHospData().pipe((0,u.R)(this.destroy$),(0,b.x)(()=>this.getting=!1),(0,H.U)(e=>{this.dataSource.data=e.content.HCProgramList.filter(i=>1===i.hospitalID)}),(0,L.K)(e=>this.onError(e))).subscribe())}openAddHCProgramDialog(){this.matDialog.open(V.h).afterClosed().pipe((0,u.R)(this.destroy$),(0,v.h)(e=>!0===e),(0,C.b)(()=>this.onGetHospData())).subscribe()}onHCProgramEnabledChange(e,n){if(this.updatingIDs.has(n))return;this.updatingIDs.add(n);const i={programID:n,enabled:e.checked?Y.YN.Y:Y.YN.N};this.gsaService.UpdateHCProgram(i).pipe((0,u.R)(this.destroy$),(0,b.x)(()=>this.updatingIDs.delete(n)),(0,H.U)(p=>{const r=new N.r({message:p.message,type:w.p.Success});this.snackBarService.add(r),this.dataSource.data=this.dataSource.data.map(c=>c.programID===n?Object.assign(Object.assign({},c),{enabled:i.enabled}):c)}),(0,L.K)(p=>this.onError(p))).subscribe()}openUpdateHCProgramDialog(e){this.matDialog.open(K.V,{data:{program:e}}).afterClosed().pipe((0,u.R)(this.destroy$),(0,v.h)(i=>!0===i),(0,C.b)(()=>this.onGetHospData())).subscribe()}onError(e){const n=new N.r({message:e,type:w.p.Error});return this.snackBarService.add(n),F.E}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete(),this.gtSMQuery.removeEventListener("change",this._gtSMQueryListener)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.vx),t.Y36(t.sBO),t.Y36(R.uw),t.Y36($.c),t.Y36(j.S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hcprogram-mgmt"]],viewQuery:function(e,n){if(1&e&&(t.Gf(_.NW,5),t.Gf(h.YE,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},decls:33,vars:6,consts:[[1,"page-title"],[1,"flex"],[1,"grow"],["type","button","mat-mini-fab","","color","accent","matTooltip","\u65b0\u589e\u5065\u6aa2\u9805\u76ee",1,"mx-6","my-4",3,"click"],[1,"spinner-box"],[1,"overflow-auto"],["mat-table","","multiTemplateDataRows","","matSort","",1,"w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","h-0",4,"matRowDef","matRowDefColumns"],["matColumnDef","enabled"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","border-b-0",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","charge"],["matColumnDef","actions"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["pageSize","10","hidePageSize","",1,"w-full"],["class","spinner",4,"ngIf"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"h-0"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"border-b-0"],["color","primary",3,"checked","disabled","change"],[1,"block","text-base","py-2"],["mat-header-cell",""],[1,"font-mono"],["mat-icon-button","","color","primary","matTooltip","\u7de8\u8f2f\u5065\u6aa2\u9805\u76ee",3,"click"],["mat-cell",""],[1,"w-full","program","detail-col"],["class","grid grid-cols-1 border-t border-black border-opacity-6",4,"ngIf"],[1,"grid","grid-cols-1","border-t","border-black","border-opacity-6"],[1,"col-span-1"],[1,"spinner"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\u5065\u6aa2\u9805\u76ee\u7dad\u8b77"),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"span",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.openAddHCProgramDialog()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()()(),t.TgZ(7,"mat-card")(8,"div",4)(9,"div",5)(10,"table",6),t.YNc(11,et,1,0,"tr",7),t.YNc(12,ot,1,0,"tr",8),t.YNc(13,nt,1,0,"tr",9),t.ynx(14,10),t.YNc(15,at,2,0,"th",11),t.YNc(16,it,3,5,"td",12),t.BQk(),t.ynx(17,13),t.YNc(18,st,2,0,"th",11),t.YNc(19,pt,3,1,"td",12),t.BQk(),t.ynx(20,14),t.YNc(21,lt,2,0,"th",15),t.YNc(22,rt,3,1,"td",12),t.BQk(),t.ynx(23,16),t.YNc(24,ct,2,0,"th",11),t.YNc(25,mt,4,6,"td",12),t.BQk(),t.ynx(26,17),t.YNc(27,ut,2,0,"th",15),t.YNc(28,dt,4,0,"td",12),t.BQk(),t.ynx(29,18),t.YNc(30,ht,3,2,"td",19),t.BQk(),t.qZA()(),t._UZ(31,"mat-paginator",20),t.YNc(32,ft,2,0,"div",21),t.qZA()()),2&e&&(t.xp6(10),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("matHeaderRowDef",n.gtSMQuery.matches?n.displayedColumnsSM:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.gtSMQuery.matches?n.displayedColumnsSM:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(5,Ct)),t.xp6(19),t.Q6J("ngIf",n.getting))},directives:[D.lW,W.gM,y.Hw,M.a8,l.BZ,h.YE,l.as,l.XQ,l.nj,l.Gk,l.w1,l.fO,l.ge,h.nU,l.Dz,l.ev,J.Rr,d.O5,_.NW,U.Ou],pipes:[tt.Z,d.H9],styles:[""]}),o})();var f=s(1777),At=s(8372),x=s(7660),_t=s(6681),vt=s(2824),Dt=s(3507),yt=s(3062),Zt=s(2945),Tt=s(508),bt=s(6600);function Ht(o,a){if(1&o&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function Lt(o,a){1&o&&t._UZ(0,"tr",27)}function Mt(o,a){1&o&&t._UZ(0,"tr",28)}function St(o,a){1&o&&t._UZ(0,"tr",29)}function Qt(o,a){1&o&&(t.TgZ(0,"th",30),t._uU(1,"\u7533\u8acb\u55ae\u7de8\u865f"),t.qZA())}function Ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",31)(1,"span",32),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw().onGetAppl(p.applicationID)}),t._uU(2),t.qZA()()}if(2&o){const e=a.$implicit,n=t.oxw();t.xp6(1),t.ekj("text-amber-400",n.expandingApplID===e.applicationID||(null==n.expandedAppl?null:n.expandedAppl.applicationID)===e.applicationID),t.xp6(1),t.Oqu(e.applicationID)}}function Yt(o,a){1&o&&(t.TgZ(0,"th",30),t._uU(1,"\u7533\u8acb\u65e5\u671f"),t.qZA())}function wt(o,a){if(1&o&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",t.xi3(3,1,e.createDatetime,"yyyy/MM/dd")," ")}}function Nt(o,a){1&o&&(t.TgZ(0,"th",30),t._uU(1,"\u59d3\u540d"),t.qZA())}function It(o,a){if(1&o&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.name)}}function Et(o,a){1&o&&(t.TgZ(0,"th",30),t._uU(1,"\u7533\u8acb\u72c0\u614b"),t.qZA())}function Bt(o,a){if(1&o&&(t.TgZ(0,"td",31)(1,"span"),t._uU(2),t.ALo(3,"i18nSelect"),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Oqu(t.xi3(3,1,e.status,n.applStatusMap))}}function Jt(o,a){1&o&&(t.TgZ(0,"th",33),t._uU(1,"\u64cd\u4f5c"),t.qZA())}const Ot=function(o){return{appl:o}};function kt(o,a){if(1&o&&(t.TgZ(0,"button",35)(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.oxw();const n=t.MAs(39);t.Q6J("matMenuTriggerFor",n)("matMenuTriggerData",t.VKq(2,Ot,e))}}function Ft(o,a){if(1&o&&(t.TgZ(0,"td",31),t.YNc(1,kt,3,4,"button",34),t.qZA()),2&o){const e=a.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.status===n.applStatusObj.Y||e.status===n.applStatusObj.Arranged||e.status===n.applStatusObj.Completed)}}function Rt(o,a){1&o&&(t.TgZ(0,"div",40),t._UZ(1,"mat-spinner"),t.qZA())}function $t(o,a){if(1&o&&t._UZ(0,"app-expanded-appl",41),2&o){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("appl",e)("expandedAppl",n.expandedAppl)}}function jt(o,a){if(1&o&&(t.TgZ(0,"td",36)(1,"div",37)(2,"div",38),t.YNc(3,Rt,2,0,"div",23),t.YNc(4,$t,1,2,"app-expanded-appl",39),t.qZA()()()),2&o){const e=a.$implicit,n=t.oxw();t.uIk("colspan",(n.gtMDQuery.matches?n.displayedColumnsMD:n.displayedColumns).length),t.xp6(1),t.Q6J("@detailExpand",n.expandingApplID===e.applicationID||(null==n.expandedAppl?null:n.expandedAppl.applicationID)===e.applicationID?"expanded":"collapsed"),t.xp6(2),t.Q6J("ngIf",n.getting&&n.expandingApplID===e.applicationID),t.xp6(1),t.Q6J("ngIf",(null==n.expandedAppl?null:n.expandedAppl.applicationID)===e.applicationID)}}function Gt(o,a){1&o&&(t.TgZ(0,"div",40),t._UZ(1,"mat-spinner"),t.qZA())}function qt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().appl;return t.oxw().openArrangeApplDialog(i.applicationID,i.scheduledDate)}),t.TgZ(1,"mat-icon",45),t._uU(2,"event"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u5b89\u6392\u5065\u6aa2"),t.qZA()()}}function Pt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().appl;return t.oxw().openCompleteApplDialog(i.applicationID,i.completionDate,i.hasCancer)}),t.TgZ(1,"mat-icon",45),t._uU(2,"event_available"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u5b8c\u6210\u5065\u6aa2"),t.qZA()()}}function zt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().appl;return t.oxw().openCancelApplDialog(i.applicationID)}),t.TgZ(1,"mat-icon",47),t._uU(2,"cancel"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"\u53d6\u6d88\u7533\u8acb"),t.qZA()()}}function Xt(o,a){if(1&o&&(t.YNc(0,qt,5,0,"button",42),t.YNc(1,Pt,5,0,"button",42),t.YNc(2,zt,5,0,"button",43)),2&o){const e=a.appl,n=t.oxw();t.Q6J("ngIf",e.status===n.applStatusObj.Y||e.status===n.applStatusObj.Arranged),t.xp6(1),t.Q6J("ngIf",e.status===n.applStatusObj.Arranged||e.status===n.applStatusObj.Completed),t.xp6(1),t.Q6J("ngIf",e.status===n.applStatusObj.Y||e.status===n.applStatusObj.Arranged)}}const Kt=function(){return["expandedDetail"]},Wt=[{path:"",component:z,resolve:{hospData:X.v},children:[{path:"",pathMatch:"full",redirectTo:"hosp-appl-list"},{path:"hosp-appl-list",component:(()=>{class o{constructor(e,n,i,p,r,c){this.media=e,this.changeDetectorRef=n,this.route=i,this.matDialog=p,this.snackBarService=r,this.gsaService=c,this.destroy$=new k.x,this._gtMDQueryListener=()=>this.changeDetectorRef.detectChanges(),this.gtMDQuery=this.media.matchMedia("(min-width: 960px)"),this.fg=new m.cw({applStatusList:new m.NI(null),keyword:new m.NI(null)}),this.fcs={applStatusList:this.fg.controls.applStatusList,keyword:this.fg.controls.keyword},this.applList=[],this.dataSource=new l.by([]),this.displayedColumns=["applicationID","actions"],this.displayedColumnsMD=["applicationID","createDatetime","name","status","actions"],this.expandedAppl=null,this.applStatusSelectList=x.C6,this.applStatusObj=x.Q5,this.applStatusMap=x.Lg,this.gettingList=!1,this.getting=!1,this.cancelling=!1,this.gtMDQuery.addEventListener("change",this._gtMDQueryListener)}get fv(){return this.fg.value}ngOnInit(){this.fg.valueChanges.pipe((0,u.R)(this.destroy$),(0,At.b)(300),(0,C.b)(e=>{var n;let i=[...this.applList];const{applStatusList:p,keyword:r}=e;0!==(null!==(n=null==p?void 0:p.length)&&void 0!==n?n:0)&&(i=i.filter(c=>p.includes(c.status))),"string"==typeof r&&r.length>0&&(i=i.filter(c=>[c.applicationID,c.name].some(oe=>oe.includes(r)))),this.dataSource.data=i,this.paginator.firstPage()})).subscribe(),this.onGetApplList()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}onGetApplList(){this.gettingList||(this.expandedAppl=null,this.gettingList=!0,this.gsaService.GetApplList({}).pipe((0,u.R)(this.destroy$),(0,b.x)(()=>this.gettingList=!1),(0,H.U)(e=>{this.applList=e.content.filter(i=>[x.n.Y,x.n.Arranged,x.n.Completed].includes(i.status)),this.fg.setValue({applStatusList:[],keyword:""})}),(0,L.K)(e=>this.onError(e))).subscribe())}onGetAppl(e){var n;this.getting||(null===(n=this.expandedAppl)||void 0===n?void 0:n.applicationID)===e||(this.expandingApplID=e,this.expandedAppl=null,this.getting=!0,this.gsaService.GetAppl({applicationID:e}).pipe((0,u.R)(this.destroy$),(0,b.x)(()=>this.getting=!1),(0,H.U)(p=>{var r;const{hospData:c}=null===(r=this.route.parent)||void 0===r?void 0:r.snapshot.data;this.expandingApplID=void 0,this.expandedAppl=(0,_t.tB)(p.content,c)}),(0,L.K)(p=>this.onError(p))).subscribe())}openArrangeApplDialog(e,n){this.matDialog.open(Dt.U,{data:{applicationID:e,scheduledDate:n}}).afterClosed().pipe((0,u.R)(this.destroy$),(0,v.h)(p=>!0===p),(0,C.b)(()=>this.onGetApplList())).subscribe()}openCompleteApplDialog(e,n,i){this.matDialog.open(yt.E,{data:{applicationID:e,completionDate:n,hasCancer:i}}).afterClosed().pipe((0,u.R)(this.destroy$),(0,v.h)(r=>!0===r),(0,C.b)(()=>this.onGetApplList())).subscribe()}openCancelApplDialog(e){this.matDialog.open(vt.d,{data:{applicationID:e}}).afterClosed().pipe((0,u.R)(this.destroy$),(0,v.h)(i=>!0===i),(0,C.b)(()=>this.onGetApplList())).subscribe()}onError(e){const n=new N.r({message:e,type:w.p.Error});return this.snackBarService.add(n),F.E}ngOnDestroy(){this.destroy$.next(null),this.destroy$.complete(),this.gtMDQuery.removeEventListener("change",this._gtMDQueryListener)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.vx),t.Y36(t.sBO),t.Y36(g.gz),t.Y36(R.uw),t.Y36($.c),t.Y36(j.S))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-hosp-appl-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(_.NW,5),t.Gf(h.YE,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.paginator=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first)}},decls:41,vars:8,consts:[[1,"page-title"],[1,"grid","grid-cols-2","gap-x-4","my-4",3,"formGroup"],[1,"col-span-2","sm:col-span-1"],["formControlName","applStatusList","multiple","","appAutoFocus",""],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","keyword","autocomplete","off"],[1,"spinner-box"],[1,"overflow-auto"],["mat-table","","multiTemplateDataRows","","matSort","",1,"w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","h-0",4,"matRowDef","matRowDefColumns"],["matColumnDef","applicationID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","border-b-0",4,"matCellDef"],["matColumnDef","createDatetime"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["pageSize","10","hidePageSize","",1,"w-full"],["class","spinner",4,"ngIf"],["actionMenu","matMenu"],["matMenuContent",""],[3,"value"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"h-0"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"border-b-0"],[1,"block","text-base","clickable-text","py-2",3,"click"],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","matMenuTriggerData",4,"ngIf"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-cell",""],[1,"overflow-hidden","flex"],[1,"w-full","spinner-box","appl","detail-col"],[3,"appl","expandedAppl",4,"ngIf"],[1,"spinner"],[3,"appl","expandedAppl"],["mat-menu-item","","class","color-primary",3,"click",4,"ngIf"],["mat-menu-item","","class","color-warn",3,"click",4,"ngIf"],["mat-menu-item","",1,"color-primary",3,"click"],[1,"color-primary"],["mat-menu-item","",1,"color-warn",3,"click"],[1,"color-warn"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\u7533\u8acb\u55ae\u5217\u8868"),t.qZA(),t.TgZ(2,"form",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"\u7533\u8acb\u55ae\u72c0\u614b"),t.qZA(),t.TgZ(6,"mat-select",3),t.YNc(7,Ht,2,2,"mat-option",4),t.qZA()(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"\u7533\u8acb\u55ae\u7de8\u865f\u3001\u59d3\u540d\u95dc\u9375\u5b57"),t.qZA(),t._UZ(11,"input",5),t.qZA()(),t.TgZ(12,"mat-card")(13,"div",6)(14,"div",7)(15,"table",8),t.YNc(16,Lt,1,0,"tr",9),t.YNc(17,Mt,1,0,"tr",10),t.YNc(18,St,1,0,"tr",11),t.ynx(19,12),t.YNc(20,Qt,2,0,"th",13),t.YNc(21,Ut,3,3,"td",14),t.BQk(),t.ynx(22,15),t.YNc(23,Yt,2,0,"th",13),t.YNc(24,wt,4,4,"td",14),t.BQk(),t.ynx(25,16),t.YNc(26,Nt,2,0,"th",13),t.YNc(27,It,3,1,"td",14),t.BQk(),t.ynx(28,17),t.YNc(29,Et,2,0,"th",13),t.YNc(30,Bt,4,4,"td",14),t.BQk(),t.ynx(31,18),t.YNc(32,Jt,2,0,"th",19),t.YNc(33,Ft,2,1,"td",14),t.BQk(),t.ynx(34,20),t.YNc(35,jt,5,4,"td",21),t.BQk(),t.qZA()(),t._UZ(36,"mat-paginator",22),t.YNc(37,Gt,2,0,"div",23),t.qZA()(),t.TgZ(38,"mat-menu",null,24),t.YNc(40,Xt,3,3,"ng-template",25),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",n.fg),t.xp6(5),t.Q6J("ngForOf",n.applStatusSelectList),t.xp6(8),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("matHeaderRowDef",n.gtMDQuery.matches?n.displayedColumnsMD:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.gtMDQuery.matches?n.displayedColumnsMD:n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(7,Kt)),t.xp6(19),t.Q6J("ngIf",n.gettingList))},directives:[m._Y,m.JL,m.sg,S.KE,S.hX,B.gD,m.JJ,m.u,Zt.U,d.sg,Tt.ey,E.Nt,m.Fj,M.a8,l.BZ,h.YE,l.as,l.XQ,l.nj,l.Gk,l.w1,l.fO,l.ge,h.nU,l.Dz,l.ev,d.O5,D.lW,A.p6,y.Hw,U.Ou,bt.C,_.NW,A.VK,A.KA,A.OP],pipes:[d.uU,d._K],styles:[""],data:{animation:[(0,f.X$)("detailExpand",[(0,f.SB)("collapsed",(0,f.oB)({height:"0px",minHeight:"0"})),(0,f.SB)("expanded",(0,f.oB)({height:"*"})),(0,f.eR)("expanded <=> collapsed",(0,f.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),o})()},{path:"hcprogram-mgmt",component:xt}]}];let te=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(Wt)],g.Bz]}),o})(),ee=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,m.UX,te,D.ot,M.QW,S.lN,y.Ps,E.c,Q.ie,A.Tx,_.TU,U.Cq,B.LD,Z.SJ,J.rP,h.JX,l.p0,O.g0,G.m]]}),o})()}}]);